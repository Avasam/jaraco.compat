Add forward compatibility for functools cache in Python 3.8.